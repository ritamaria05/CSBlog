---
import LayoutBase from "../layouts/LayoutBase.astro";
import { getCollection, type CollectionEntry } from "astro:content";
const theoryPosts = await getCollection("theory");
const projectPosts = await getCollection("projects");
const allPosts = [...theoryPosts, ...projectPosts];
allPosts.sort(
	(
		a: CollectionEntry<"theory"> | CollectionEntry<"projects">,
		b: CollectionEntry<"theory"> | CollectionEntry<"projects">,
	) => b.data.date.valueOf() - a.data.date.valueOf(),
);
const recentPosts = allPosts.slice(0, 5);
---

<LayoutBase title="Home">
	<section
		class="text-center py-12 border-b border-gray-200 dark:border-gray-800 transition-colors duration-300"
	>
		<h1 class="text-5xl font-extrabold mb-6 text-gray-900 dark:text-white">
			Welcome to my CS Second Brain
		</h1>
		<p
			class="text-xl text-gray-600 dark:text-white mb-8 max-w-2xl mx-auto leading-relaxed"
		>
			A blog about computer science topics, projects, and theories. Here I
			document my learning journey, share insights, and explore new ideas
			in the world of CS.
		</p>
		<div class="flex justify-center gap-4">
			<a
				href="/theory"
				class="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition shadow-lg hover:shadow-blue-500/20"
			>
				Explore Theory
			</a>
			<a
				href="/projects"
				class="bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition shadow-lg hover:shadow-green-500/20"
			>
				Explore Projects
			</a>
		</div>
	</section>
	<section class="mt-12">
		<h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
			Recent Posts
		</h2>
		<div class="grid gap-6">
			{
				recentPosts.map(
					(
						post:
							| CollectionEntry< "theory" >
							| CollectionEntry< "projects" >,
					) => (
						<a
							href={`/${post.collection}/${post.slug}`}
							class="group block p-6 bg-white dark:bg-gray-200 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300"
						>
							<span
								class={`text-xs font-bold uppercase tracking-wide mb-2 inline-block px-2 py-1 rounded
							${
								post.collection === "projects"
									? "bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-200"
									: "bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200"
							}`}
							>
								{post.collection === "projects"
									? "Project"
									: "Theory"}
							</span>
							<h3 class="text-xl font-bold mb-3 text-gray-900 dark:text-gray-700 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
								{post.data.title}
							</h3>
							<p class="text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3">{post.data.description}</p>
							<p class="text-xs text-gray-400 dark:text-gray-500 mt-auto pt-4 border-t border-gray-100 dark:border-gray-700">
								Published on{" "}
								{new Date(post.data.date).toLocaleDateString()}
							</p>
						</a>
					),
				)
			}
		</div>
	</section>
</LayoutBase>
