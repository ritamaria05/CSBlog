---
import LayoutBase from "../layouts/LayoutBase.astro";
import { getCollection, type CollectionEntry } from "astro:content";
const theoryPosts = await getCollection("theory");
const projectPosts = await getCollection("projects");
const allPosts = [...theoryPosts, ...projectPosts];
allPosts.sort(
	(
		a: CollectionEntry<"theory"> | CollectionEntry<"projects">,
		b: CollectionEntry<"theory"> | CollectionEntry<"projects">,
	) => b.data.date.valueOf() - a.data.date.valueOf(),
);
const recentPosts = allPosts.slice(0, 5);
---

<LayoutBase title="Home">
	<section class="text-center py-12 border-b border-gray-200">
		<h1 class="text-3xl font-bold mb-6">Welcome to my CS Second Brain</h1>
		<p class="text-lg text-gray-700 mb-4">
			A blog about computer science topics, projects, and theories. Here I
			document my learning journey, share insights, and explore new ideas
			in the world of CS.
		</p>
		<div class="flex justify-center gap-4">
			<a
				href="/theory"
				class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
			>
				Explore Theory
			</a>
			<a
				href="/projects"
				class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition"
			>
				Explore Projects
			</a>
		</div>
	</section>
	<section class="mt-12">
		<h2 class="text-2xl font-semibold mb-6">Recent Posts</h2>
		<div class="grid gap-6">
			{recentPosts.map(
				(post: CollectionEntry<"theory"> | CollectionEntry<"projects">) => (
					<a  href={`/${post.collection}/${post.slug}`} 
						class="group relative block p-6 bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 ease-in-out"
						>
							<div class="absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-600 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
						<span class={`text-xs font-bold uppercase tracking-wide mb-2 inline-block px-2 py-1 rounded
							${post.collection === "theory" ? "bg-blue-200 text-blue-800" : "bg-green-200 text-green-800"}`}>
							{post.collection === "theory" ? "Theory" : "Project"}
						</span>
						<h3 class="text-xl font-semibold">{post.data.title}</h3>
						<p class="text-gray-600">{post.data.description}</p>
						<p class="text-sm text-gray-500">
							Published on{" "}
							{new Date(post.data.date).toLocaleDateString()}
						</p>
					</a>
				),
			)}
		</div>
	</section>
</LayoutBase>
